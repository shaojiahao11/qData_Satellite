server {
#ç›‘å¬ 80 ç«¯å£ï¼ˆHTTP é»˜è®¤ç«¯å£ï¼‰ã€‚ç”¨æˆ·é€šè¿‡ http://IP è®¿é—®æ—¶ï¼ŒNginx ä¼šå¤„ç†è¯·æ±‚ã€‚
    listen 80;
;     åªå“åº” è®¿é—® IP ä¸º 101.33.200.2 çš„è¯·æ±‚ã€‚
    server_name 101.33.200.2;

; å…è®¸å®¢æˆ·ç«¯ä¸Šä¼ æœ€å¤§ 500MB çš„æ–‡ä»¶ï¼ˆ
    client_max_body_size 500M;
    add_header Strict-Transport-Security "max-age=31536000";
;     è®¾ç½® ä»£ç†è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢å¤§æ–‡ä»¶ä¸Šä¼ æˆ–æ…¢æ¥å£è¢«ä¸­æ–­ã€‚å•ä½æ˜¯ç§’ï¼ˆsï¼‰
    proxy_connect_timeout 600s;
    proxy_send_timeout 600s;
    proxy_read_timeout 600s;
    keepalive_timeout 600s;
    send_timeout 60s;

; æ‰€æœ‰ä»¥ / å¼€å¤´çš„è¯·æ±‚ï¼ˆæ¯”å¦‚ /, /login, /js/app.jsï¼‰éƒ½èµ°è¿™é‡Œ
    location / {
        proxy_read_timeout 600;
        charset utf-8;
;         å‘Šè¯‰ Nginxï¼šå‰ç«¯æ–‡ä»¶æ”¾åœ¨è¿™é‡Œã€‚
        root   /www/wwwroot/qdata-frontend/dist;
;         æ”¯æŒ Vue/React çš„ history è·¯ç”±æ¨¡å¼
; æ¯”å¦‚ç”¨æˆ·è®¿é—® /dashboardï¼š
;
; å…ˆæ‰¾æœ‰æ²¡æœ‰ /dashboard æ–‡ä»¶ï¼ˆæ²¡æœ‰ï¼‰
; å†æ‰¾æœ‰æ²¡æœ‰ /dashboard/ ç›®å½•ï¼ˆæ²¡æœ‰ï¼‰
; æœ€åè¿”å› /index.htmlï¼Œç”±å‰ç«¯è·¯ç”±æ¥ç®¡ â†’ é¡µé¢æ­£å¸¸æ˜¾ç¤º
; âœ… è¿™æ ·åˆ·æ–°é¡µé¢å°±ä¸ä¼š 404ï¼
        try_files $uri $uri/ /index.html;
;         é»˜è®¤é¦–é¡µæ–‡ä»¶åï¼ˆå½“è®¿é—®ç›®å½•æ—¶ï¼Œæ¯”å¦‚ /ï¼‰
        index  index.html index.htm;
    }

; æ‰€æœ‰ä»¥ /prod-api å¼€å¤´çš„è¯·æ±‚ï¼ˆå¦‚ /prod-api/user/loginï¼‰èµ°è¿™é‡Œã€‚
    location /prod-api {
        #add_header 'Access-Control-Allow-Methods' 'GET, POST,PUT,DELETE, OPTIONS';
        proxy_read_timeout 6000;
;         å»æ‰ /prod-api å‰ç¼€ï¼
; ä¾‹å¦‚ï¼š
;
; å‰ç«¯è¯·æ±‚ /prod-api/user
; å®é™…è½¬å‘ç»™åç«¯ï¼šhttp://127.0.0.1:8080/user
; ğŸ‘‰ åç«¯ä»£ç é‡Œåªéœ€è¦å†™ /userï¼Œä¸ç”¨å…³å¿ƒ /prod-api
        rewrite ^/prod-api/(.*)$ /$1 break;
;               æŠŠç”¨æˆ·çš„çœŸå® IP ä¼ é€’ç»™åç«¯ã€‚
;                 å¦åˆ™åç«¯çœ‹åˆ°çš„å…¨æ˜¯ 127.0.0.1ï¼ˆNginx è‡ªå·±çš„ IPï¼‰
        proxy_set_header X-Real-Ip $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
; æ ¸å¿ƒï¼åå‘ä»£ç†
; æŠŠè¯·æ±‚è½¬å‘ç»™æœ¬åœ°è¿è¡Œçš„ Java åç«¯æœåŠ¡ï¼ˆç›‘å¬ 8080 ç«¯å£ï¼‰ã€‚
        proxy_pass http://127.0.0.1:8080;
    }

}

